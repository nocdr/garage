{"data":{"site":{"siteMetadata":{"title":"ğŸ¤”ï¸Jason Yang's Blog","author":"Jason Yang"}},"markdownRemark":{"id":"0c59eede-f120-5780-85cd-8df4e4a8e7d9","excerpt":"Javaçš„é‡è¦åŠŸèƒ½ä¹‹ä¸€å°±æ˜¯å†…éƒ¨æ”¯æŒå¤šçº¿ç¨‹-åœ¨ä¸€ä¸ªç¨‹åºä¸­å…è®¸åŒæ—¶è¿è¡Œå¤šä¸ªä»»åŠ¡ã€‚çº¿ç¨‹çš„æ¦‚å¿µçº¿ç¨‹æ˜¯æŒ‡ä¸€ä¸ªä»»åŠ¡ä»å¤´åˆ°å°¾çš„æ‰§è¡Œæµç¨‹ã€‚ä¸€ä¸ªJavaâ€¦","html":"<p>Javaçš„é‡è¦åŠŸèƒ½ä¹‹ä¸€å°±æ˜¯å†…éƒ¨æ”¯æŒå¤šçº¿ç¨‹-åœ¨ä¸€ä¸ªç¨‹åºä¸­å…è®¸åŒæ—¶è¿è¡Œå¤šä¸ªä»»åŠ¡ã€‚</p>\n<h2>çº¿ç¨‹çš„æ¦‚å¿µ</h2>\n<blockquote>\n<p><strong>çº¿ç¨‹</strong>æ˜¯æŒ‡ä¸€ä¸ªä»»åŠ¡ä»å¤´åˆ°å°¾çš„æ‰§è¡Œæµç¨‹ã€‚</p>\n</blockquote>\n<p>ä¸€ä¸ªJavaç¨‹åºä¸­å¯ä»¥å¹¶å‘çš„å¯åŠ¨å¤šä¸ªçº¿ç¨‹ï¼Œè¿™äº›çº¿ç¨‹å¯ä»¥åœ¨å¤šä¸ªå¤„ç†å™¨ä¸ŠåŒæ—¶è¿è¡Œã€‚</p>\n<p>å¤šçº¿ç¨‹å¯ä»¥ä½¿ç¨‹åºååº”æ›´å¿«ï¼Œäº¤äº’æ€§æ›´å¼ºï¼Œæ‰§è¡Œæ•ˆç‡æ›´é«˜ï¼Œå³ä½¿å†å•æ ¸å¤„ç†å™¨çš„ç³»ç»Ÿä¸Šï¼Œå¤šçº¿ç¨‹ç¨‹åºçš„è¿è¡Œé€Ÿåº¦ä¹Ÿæ¯”å•çº¿ç¨‹é€Ÿåº¦æ›´å¿«ã€‚</p>\n<p>åœ¨å•å¤„ç†å™¨ç³»ç»Ÿä¸­ï¼Œå¤šä¸ªçº¿ç¨‹å…±äº«CPUæ—¶é—´ï¼Œç§°ä¸ºæ—¶é—´åˆ†äº«ï¼Œæ“ä½œç³»ç»Ÿè´Ÿè´£è°ƒåº¦åŠåˆ†é…èµ„æºç»™å®ƒä»¬ã€‚CPUåˆ†é…ç»™çº¿ç¨‹çš„æ—¶é—´ç§°ä¸ºæ—¶é—´ç‰‡ï¼Œä¸€èˆ¬æ˜¯å‡ åmsï¼Œè·å¾—æ—¶é—´ç‰‡çš„çº¿ç¨‹ä¼šè¢«CPUåˆ‡æ¢æ‰§è¡Œã€‚</p>\n<p>åœ¨Javaä¸­ï¼Œæ¯ä¸ªä»»åŠ¡éƒ½æ˜¯<code class=\"language-text\">Runnable</code>æ¥å£çš„ä¸€ä¸ªå®ä¾‹ï¼Œä¹Ÿæˆä¸º<code class=\"language-text\">å¯è¿è¡Œå¯¹è±¡ï¼ˆrunnable objectï¼‰</code>ã€‚</p>\n<h2>åˆ›å»ºä»»åŠ¡å’Œçº¿ç¨‹</h2>\n<p>ä¸€ä¸ªä»»åŠ¡ç±»å¿…é¡»å®ç°Runnableæ¥å£ã€‚ç„¶åé€šè¿‡çº¿ç¨‹æ¥æ‰§è¡Œä»»åŠ¡ã€‚\nä»»åŠ¡å°±æ˜¯å¯¹è±¡ã€‚ä¸ºäº†åˆ›å»ºä»»åŠ¡ï¼Œå¿…é¡»é¦–å…ˆä¸ºä»»åŠ¡å®šä¹‰ä¸€ä¸ªå®ç°Runnableæ¥å£çš„ç±»ã€‚</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token comment\">// é€šè¿‡å®ç°Runnableæ¥å£å®šä¹‰ä¸€ä¸ªä»»åŠ¡ç±»</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">TaskClass</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">Runnable</span><span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">public</span> <span class=\"token class-name\">TaskClass</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\n\t<span class=\"token punctuation\">}</span>\n\t\n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t<span class=\"token comment\">// do something...</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token comment\">// åˆ›å»ºä¸€ä¸ªä»»åŠ¡ã€ä¸€ä¸ªçº¿ç¨‹ä»¥åŠå¯åŠ¨çº¿ç¨‹çš„æ­¥éª¤</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Client</span><span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">someMethod</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t<span class=\"token comment\">//  åˆ›å»ºä¸€ä¸ªTaskClasså®ä¾‹</span>\n\t\t<span class=\"token class-name\">TaskClass</span> task <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">TaskClass</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token comment\">// åˆ›å»ºä¸€ä¸ªçº¿ç¨‹</span>\n\t\t<span class=\"token class-name\">Thread</span> thread <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Thread</span><span class=\"token punctuation\">(</span>task<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token comment\">// å¯åŠ¨çº¿ç¨‹</span>\n\t\tthread<span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3>å®æˆ˜</h3>\n<blockquote>\n<p>åˆ›å»ºä¸‰ä¸ªä»»åŠ¡ï¼Œç„¶ååˆ›å»ºä¸‰ä¸ªçº¿ç¨‹ï¼Œè¿è¡Œè¿™äº›ä»»åŠ¡:</p>\n<p>ç¬¬ä¸€ä¸ªä»»åŠ¡æ‰“å°å­—æ¯a100æ¬¡</p>\n<p>ç¬¬äºŒä¸ªä»»åŠ¡æ‰“å°å­—æ¯b100æ¬¡</p>\n<p>ç¬¬ä¸‰ä¸ªä»»åŠ¡æ‰“å°1åˆ°100çš„æ•´æ•°</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">package</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>nocoder<span class=\"token punctuation\">.</span>thread</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/**\n * åˆ›å»ºä¸‰ä¸ªä»»åŠ¡ä»¥åŠä¸‰ä¸ªè¿è¡Œè¿™äº›ä»»åŠ¡çš„çº¿ç¨‹:\n * ç¬¬ä¸€ä¸ªä»»åŠ¡æ‰“å°å­—æ¯a100æ¬¡\n * ç¬¬äºŒä¸ªä»»åŠ¡æ‰“å°å­—æ¯b100æ¬¡\n * ç¬¬ä¸‰ä¸ªä»»åŠ¡æ‰“å°1åˆ°100çš„æ•´æ•°\n *\n * @author jason\n * @date 18/4/3.\n */</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">TaskThreadDemo</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// åˆ›å»ºä»»åŠ¡ç±»</span>\n        <span class=\"token class-name\">Runnable</span> printA <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">PrintChar</span><span class=\"token punctuation\">(</span><span class=\"token string\">'a'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">Runnable</span> printB <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">PrintChar</span><span class=\"token punctuation\">(</span><span class=\"token string\">'b'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">Runnable</span> print100 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">PrintNumber</span><span class=\"token punctuation\">(</span><span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">// åˆ›å»ºçº¿ç¨‹</span>\n        <span class=\"token class-name\">Thread</span> threadPrintA <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Thread</span><span class=\"token punctuation\">(</span>printA<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">Thread</span> threadPrintB <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Thread</span><span class=\"token punctuation\">(</span>printB<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">Thread</span> threadPrint100 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Thread</span><span class=\"token punctuation\">(</span>print100<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">// å¯åŠ¨çº¿ç¨‹</span>\n        threadPrintA<span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        threadPrintB<span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        threadPrint100<span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/**\n * æ‰“å°å­—ç¬¦ä»»åŠ¡ç±»\n */</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">PrintChar</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">Runnable</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">/**\n     * éœ€è¦æ‰“å°çš„å­—ç¬¦\n     */</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">char</span> charToPrint<span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">/**\n     * éœ€è¦æ‰“å°çš„æ¬¡æ•°\n     */</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">int</span> times<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">PrintChar</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">char</span> c<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> t<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        charToPrint <span class=\"token operator\">=</span> c<span class=\"token punctuation\">;</span>\n        times <span class=\"token operator\">=</span> t<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> times<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">print</span><span class=\"token punctuation\">(</span>charToPrint<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/**\n * æ‰“å°æ•°å­—ä»»åŠ¡ç±»\n */</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">PrintNumber</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">Runnable</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">/**\n     * éœ€è¦æ‰“å°çš„æœ€å¤§å€¼\n     */</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">int</span> lastNum<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">PrintNumber</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> n<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        lastNum <span class=\"token operator\">=</span> n<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;=</span> lastNum<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\" \"</span> <span class=\"token operator\">+</span> i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n\n\n<span class=\"token punctuation\">}</span></code></pre></div>\n<blockquote>\n<p>ä»»åŠ¡ä¸­çš„run()æ–¹æ³•æŒ‡åå¦‚ä½•å®Œæˆè¿™ä¸ªä»»åŠ¡ï¼ŒJavaè™šæ‹Ÿæœºé€šè¿‡è°ƒç”¨ä»»åŠ¡çš„run()æ–¹æ³•æ‰§è¡Œä»»åŠ¡ï¼Œæ— éœ€ç¨‹åºå‘˜ç‰¹æ„è°ƒç”¨ï¼Œç›´æ¥è°ƒç”¨run()æ–¹æ³•åªæ˜¯åœ¨åŒä¸€ä¸ªçº¿ç¨‹ä¸­æ‰§è¡Œè¯¥æ–¹æ³•ï¼Œè€Œæ²¡æœ‰æ–°çº¿ç¨‹è¢«å¯åŠ¨ã€‚</p>\n</blockquote>\n<h2>Threadç±»</h2>\n<p>Threadç±»åŒ…å«ä¸ºä»»åŠ¡è€Œåˆ›å»ºçš„çº¿ç¨‹çš„æ„é€ æ–¹æ³•ï¼Œä»¥åŠæ§åˆ¶çº¿ç¨‹çš„æ–¹æ³•ã€‚</p>\n<p>Threadç±»å®ç°äº†Runnableæ¥å£ï¼Œæ‰€ä»¥å¯ä»¥å®šä¸€ä¸ªThreadçš„æ‰©å±•ç±»ï¼Œå®ç°Runnableçš„run()æ–¹æ³•ï¼Œç„¶åå®¢æˆ·ç«¯ç±»åˆ›å»ºè¿™ä¸ªç±»çš„ä¸€ä¸ªå¯¹è±¡ï¼Œè°ƒç”¨start()å¯åŠ¨çº¿ç¨‹ã€‚</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">package</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>nocoder<span class=\"token punctuation\">.</span>thread</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/**\n * @author jason\n * @date 18/4/3.\n */</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">CustomeThread</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Thread</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">CustomeThread</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Thread</span><span class=\"token punctuation\">.</span><span class=\"token function\">currentThread</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\": do something...\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Client</span><span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">Thread</span> thread1 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">CustomeThread</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        thread1<span class=\"token punctuation\">.</span><span class=\"token function\">setName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"çº¿ç¨‹1\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        thread1<span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token class-name\">Thread</span> thread2 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">CustomeThread</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        thread2<span class=\"token punctuation\">.</span><span class=\"token function\">setName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"çº¿ç¨‹2\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        thread2<span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ä½¿ç”¨<code class=\"language-text\">yield()</code>æ–¹æ³•ä¸ºå…¶ä»–çº¿ç¨‹ä¸´æ—¶è®©å‡ºCPUæ—¶é—´ã€‚</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token class-name\">Thread</span><span class=\"token punctuation\">.</span><span class=\"token function\">yield</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>ä½¿ç”¨<code class=\"language-text\">sleep(long mills)</code>å¯ä»¥å°†è¯¥çº¿ç¨‹è®¾ç½®ä¸ºä¼‘çœ ä»¥ç¡®ä¿å…¶ä»–çº¿ç¨‹çš„æ‰§è¡Œï¼Œä¼‘çœ æ—¶é—´ä¸ºæŒ‡å®šçš„æ¯«ç§’æ•°ã€‚</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token comment\">// ä¼‘çœ  1ms</span>\n<span class=\"token keyword\">try</span><span class=\"token punctuation\">{</span>\n\t<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n\t<span class=\"token class-name\">Thread</span><span class=\"token punctuation\">.</span><span class=\"token function\">sleep</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token keyword\">catch</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">InterruptedException</span> ex<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t<span class=\"token comment\">// do someting...</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><code class=\"language-text\">Thread.sleep()</code>æ–¹æ³•å¯èƒ½æŠ›å‡ºä¸€ä¸ª<code class=\"language-text\">InterruptedException</code>ï¼Œè¿™æ˜¯ä¸€ä¸ªå¿…æ£€å¼‚å¸¸ã€‚å½“ä¸€ä¸ªä¼‘çœ çº¿ç¨‹çš„interrupt()æ–¹æ³•è¢«è°ƒç”¨æ—¶ï¼Œå°±ä¼šå‘ç”Ÿè¿™æ ·çš„ä¸€ä¸ªå¼‚å¸¸ã€‚</p>\n<p>ä½¿ç”¨<code class=\"language-text\">join()</code>æ–¹æ³•ä½¿ç”¨ä¸€ä¸ªçº¿ç¨‹ç­‰å¾…å¦ä¸€ä¸ªçº¿ç¨‹çš„ç»“æŸã€‚</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">package</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>nocoder<span class=\"token punctuation\">.</span>thread</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/**\n * @author jason\n * @date 18/4/6.\n */</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">YieldTest</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">Thread</span> t <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Thread</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Runnable</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;=</span> <span class=\"token number\">10</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                    <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">print</span><span class=\"token punctuation\">(</span>i <span class=\"token operator\">+</span> <span class=\"token string\">\" \"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token punctuation\">}</span>\n                <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        t<span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n        \t  <span class=\"token comment\">// è°ƒç”¨çº¿ç¨‹tçš„join()æ–¹æ³•ï¼Œå…¶ä»–çº¿ç¨‹è¦ç­‰å¾…è¿™ä¸ªçº¿ç¨‹æ‰§è¡Œç»“æŸåæ‰ä¼šæ‰§è¡Œ</span>\n            t<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">InterruptedException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            e<span class=\"token punctuation\">.</span><span class=\"token function\">printStackTrace</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> j <span class=\"token operator\">=</span> <span class=\"token number\">11</span><span class=\"token punctuation\">;</span> j <span class=\"token operator\">&lt;=</span> <span class=\"token number\">20</span><span class=\"token punctuation\">;</span> j<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">print</span><span class=\"token punctuation\">(</span>j <span class=\"token operator\">+</span> <span class=\"token string\">\" \"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>è¾“å‡ºç»“æœï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">1 2 3 4 5 6 7 8 9 10 \n11 12 13 14 15 16 17 18 19 20 </code></pre></div>\n<p>å¦‚æœä¸åŠ join()æ–¹æ³•çš„è¾“å‡ºç»“æœé¡ºåºä¸å›ºå®š</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">11 12 13 14 15 16 17 1 2 3 4 5 6 7 8 9 10 \n18 19 20 </code></pre></div>\n<h2>çº¿ç¨‹æ± </h2>\n<h3>ä½¿ç”¨çº¿ç¨‹æ± çš„å¥½å¤„</h3>\n<p>å‡ ä¹æ‰€æœ‰éœ€è¦å¼‚æ­¥æˆ–è€…å¹¶å‘æ‰§è¡Œä»»åŠ¡çš„ç¨‹åºéƒ½å¯ä»¥ä½¿ç”¨çº¿ç¨‹æ± ï¼Œåˆç†çš„ä½¿ç”¨çº¿ç¨‹æ± æœ‰ä»¥ä¸‹å‡ ä¸ªå¥½å¤„ã€‚</p>\n<ul>\n<li>é™ä½èµ„æºæ¶ˆè€—ã€‚é€šè¿‡é‡å¤åˆ©ç”¨å·²åˆ›å»ºçš„çº¿ç¨‹ï¼Œé™ä½çº¿ç¨‹åˆ›å»ºå’Œé”€æ¯é€ æˆçš„æ¶ˆè€—ã€‚</li>\n<li>æé«˜ç›¸åº”é€Ÿåº¦ã€‚å½“ä»»åŠ¡åˆ°è¾¾æ—¶ï¼Œä»»åŠ¡å¯ä»¥ä¸éœ€è¦ç­‰åˆ°çº¿ç¨‹åˆ›å»ºå°±èƒ½ç«‹å³æ‰§è¡Œã€‚</li>\n<li>æé«˜çº¿ç¨‹çš„å¯ç®¡ç†æ€§ã€‚çº¿ç¨‹æ—¶ç¨€ç¼ºèµ„æºï¼Œå¦‚æœæ— é™åˆ¶çš„åˆ›å»ºï¼Œä¸ä»…ä¼šæ¶ˆè€—ç³»ç»Ÿèµ„æºï¼Œè€Œä¸”è¿˜ä¼šé™ä½ç³»ç»Ÿçš„ç¨³å®šæ€§ï¼Œä½¿ç”¨çº¿ç¨‹æ± å¯ä»¥è¿›è¡Œç»Ÿä¸€åˆ†é…ã€è°ƒä¼˜å’Œç›‘æ§ã€‚</li>\n</ul>\n<h3>çº¿ç¨‹æ± çš„å®ç°åŸç†</h3>\n<p>å…ˆæ¥çœ‹çœ‹çº¿ç¨‹æ± çš„ä¸»è¦å¤„ç†æµç¨‹</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ff53e6b3fbb7fa4659de8e0d702a09c4/4db5f/%E7%BA%BF%E7%A8%8B%E6%B1%A0%E7%9A%84%E4%B8%BB%E8%A6%81%E5%A4%84%E7%90%86%E6%B5%81%E7%A8%8B.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 59.427609427609426%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAAB9UlEQVQoz51SaU8TYRDef48BxFCgXPGbxhpq7xbotT1chBhJLd1tI0pPugW3ht2tbbfHPr4zTRMNfkAneZJ35n3mHklRPuCN7wiBYBh+fwjR2DESx0nEE6dIJJJPg+CTX7F4BikWP8HW9p7APjxbu9jeOcCO91Dg4Mnw7h5i0+OFz+eHRNHfBcLQtBpUrYqKquGqov4jNJSvVNRqXyCFwjHIuSKazRYi0QRSqSwsy8L/iQspEIwgk8nhc7mCvf2XePX6Lbpdnb9nsxnm8znDdV3G3/QlbzweQ6Jh0gKm0ymGw59wHIc/CJPJhMlkG41GbCPebDblN9lIX8pwOFws5TSZ4QzX11+h6z0mER4eTHy7qcMeDFinBFR9q9Xhtyt8Wq02CkUFinIufPVFham0DNse8HKy2TxnpqpUtSpOyo+beoMDDETgdDrHJ2JZtmh5jouLj1hZWcfa+iaq1RqkYCjKBJLfy1+KM3Eej14EWgolN4w++v0foih70XJWLqBz2xXZZShn5zBNkwd+eVnihZVKZXY2+n1uTxZ8vdd7lIi6kMKROPKF9/gknJ+tbvCR6r07JtDGV9de4MgfZL3eaPLxP9/w8M0uqnX/DJjLFzng/f13dqB7pPJN00K73UFD2NqdW27HMAw0xD+B+GQjHt0tgZb4C+1hUDWkuNL5AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"çº¿ç¨‹æ± çš„ä¸»è¦å¤„ç†æµç¨‹\"\n        title=\"\"\n        src=\"/static/ff53e6b3fbb7fa4659de8e0d702a09c4/b9e4f/%E7%BA%BF%E7%A8%8B%E6%B1%A0%E7%9A%84%E4%B8%BB%E8%A6%81%E5%A4%84%E7%90%86%E6%B5%81%E7%A8%8B.png\"\n        srcset=\"/static/ff53e6b3fbb7fa4659de8e0d702a09c4/cf440/%E7%BA%BF%E7%A8%8B%E6%B1%A0%E7%9A%84%E4%B8%BB%E8%A6%81%E5%A4%84%E7%90%86%E6%B5%81%E7%A8%8B.png 148w,\n/static/ff53e6b3fbb7fa4659de8e0d702a09c4/d2d38/%E7%BA%BF%E7%A8%8B%E6%B1%A0%E7%9A%84%E4%B8%BB%E8%A6%81%E5%A4%84%E7%90%86%E6%B5%81%E7%A8%8B.png 295w,\n/static/ff53e6b3fbb7fa4659de8e0d702a09c4/b9e4f/%E7%BA%BF%E7%A8%8B%E6%B1%A0%E7%9A%84%E4%B8%BB%E8%A6%81%E5%A4%84%E7%90%86%E6%B5%81%E7%A8%8B.png 590w,\n/static/ff53e6b3fbb7fa4659de8e0d702a09c4/f9b6a/%E7%BA%BF%E7%A8%8B%E6%B1%A0%E7%9A%84%E4%B8%BB%E8%A6%81%E5%A4%84%E7%90%86%E6%B5%81%E7%A8%8B.png 885w,\n/static/ff53e6b3fbb7fa4659de8e0d702a09c4/2d849/%E7%BA%BF%E7%A8%8B%E6%B1%A0%E7%9A%84%E4%B8%BB%E8%A6%81%E5%A4%84%E7%90%86%E6%B5%81%E7%A8%8B.png 1180w,\n/static/ff53e6b3fbb7fa4659de8e0d702a09c4/4db5f/%E7%BA%BF%E7%A8%8B%E6%B1%A0%E7%9A%84%E4%B8%BB%E8%A6%81%E5%A4%84%E7%90%86%E6%B5%81%E7%A8%8B.png 1188w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>ä»ä¸Šå›¾å¯ä»¥çœ‹å‡ºï¼Œä½¿ç”¨è€…æäº¤ä¸€ä¸ªä»»åŠ¡åï¼Œçº¿ç¨‹æ± çš„å¤„ç†æµç¨‹å¦‚ä¸‹ï¼š</p>\n<ol>\n<li>åˆ¤æ–­æ ¸å¿ƒçº¿ç¨‹æ± æ˜¯å¦å·²æ»¡ï¼Œå¦‚æœæ²¡æœ‰æ»¡ï¼Œåˆ™åˆ›å»ºä¸€ä¸ªæ–°çš„çº¿ç¨‹æ‰§è¡Œä»»åŠ¡ã€‚å¦‚æœæ»¡äº†ï¼Œåˆ™è¿›å…¥ä¸‹ä¸ªæµç¨‹ã€‚</li>\n<li>åˆ¤æ–­é˜Ÿåˆ—æ˜¯å¦å·²æ»¡ï¼Œå¦‚æœæ²¡æœ‰æ»¡ï¼Œå°†ä»»åŠ¡åŠ å…¥åˆ°é˜Ÿåˆ—ä¸­ã€‚å¦‚æœæ»¡äº†ï¼Œè¿›å…¥ä¸‹ä¸ªæµç¨‹ã€‚</li>\n<li>åˆ¤æ–­çº¿ç¨‹æ± æ˜¯å¦å·²æ»¡ï¼Œå¦‚æœæ²¡æœ‰æ»¡ï¼Œåˆ™åˆ›å»ºä¸€ä¸ªæ–°çš„çº¿ç¨‹æ‰§è¡Œä»»åŠ¡ã€‚å¦‚æœæ»¡äº†ï¼Œè¿›å…¥ä¸‹ä¸ªæµç¨‹ã€‚</li>\n<li>æŒ‰ç…§ç­–ç•¥å¤„ç†æ— æ³•æ‰§è¡Œçš„ä»»åŠ¡ã€‚</li>\n</ol>\n<p>ThreadPoolExecutoræ‰§è¡Œç¤ºæ„å›¾</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/fbcdd34bb60a9e164186463e7213a9e5/87985/ThreadPoolExecutor%E6%89%A7%E8%A1%8C%E7%A4%BA%E6%84%8F%E5%9B%BE.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 90.18759018759019%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAABYlAAAWJQFJUiTwAAACJklEQVQ4y4WU2XLiQAxF/euhpjK/knnLPGQeST4C7BBs8ALYZl/NjuKjiigPxWS6StXtbulK96rbjvxjXC6Xv77X67VEUaSW57kMh0MZDAZqx+NR/THnO7DD4aBAm02hgUWxkSAI5OGhJq+vb/L4+FPq9brUaj/EdT2N+RawKArNfj6fZTablcAbSdNUnp9/S6PRkJeXP9JsNuXp6Zcm+i/gdru9rpkN/Hawl2WZzk41oLo2wCqojdPppOBIwtl0OpV2u63fjgHdGmO328m9hOzTmNFopEaDxuOxLBaL+5SNxnK51Kz3pIAiIIBNJhPZ7/fq7xA4n881Y5IkKv5qtdJvAmgCncYPqtZ9AM2H5hmwo9nSTMFarZY6TUqnfr+vDlwXgkxPKiEB+4CgH8koQgGrlKoD0Q2IAHSzCu36mH74op8C4kggVKFOdtMQBxtUBhA6sqYySxyGoTJUQA5Bp2SMBDZwqHbZKrUi0BFgWNIQ9hwyQIvSodDr9SSOYs347r1L2A31/aZfmuVZLp1O53ptAAQDdldANo1uHMdqSZzoDFi321UfEvOuAz/QpsAAVrCk02A4CG3dRGjP89Soxvf9stsD+fhol2+3Wb4GX7vPOclZA4Qc4Og9pEIaYtnYRFPTxNZmVEGFVGtPEHmQSgHZpLok6ekMPbpGtdxL+weiWxxHeua6rjLAF2CaQqOuT4/rQBDOBogBYmvMgFkTbLpDGwwYfgLIEVveyWz8bQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"thread-pool-executor\"\n        title=\"\"\n        src=\"/static/fbcdd34bb60a9e164186463e7213a9e5/b9e4f/ThreadPoolExecutor%E6%89%A7%E8%A1%8C%E7%A4%BA%E6%84%8F%E5%9B%BE.png\"\n        srcset=\"/static/fbcdd34bb60a9e164186463e7213a9e5/cf440/ThreadPoolExecutor%E6%89%A7%E8%A1%8C%E7%A4%BA%E6%84%8F%E5%9B%BE.png 148w,\n/static/fbcdd34bb60a9e164186463e7213a9e5/d2d38/ThreadPoolExecutor%E6%89%A7%E8%A1%8C%E7%A4%BA%E6%84%8F%E5%9B%BE.png 295w,\n/static/fbcdd34bb60a9e164186463e7213a9e5/b9e4f/ThreadPoolExecutor%E6%89%A7%E8%A1%8C%E7%A4%BA%E6%84%8F%E5%9B%BE.png 590w,\n/static/fbcdd34bb60a9e164186463e7213a9e5/f9b6a/ThreadPoolExecutor%E6%89%A7%E8%A1%8C%E7%A4%BA%E6%84%8F%E5%9B%BE.png 885w,\n/static/fbcdd34bb60a9e164186463e7213a9e5/2d849/ThreadPoolExecutor%E6%89%A7%E8%A1%8C%E7%A4%BA%E6%84%8F%E5%9B%BE.png 1180w,\n/static/fbcdd34bb60a9e164186463e7213a9e5/87985/ThreadPoolExecutor%E6%89%A7%E8%A1%8C%E7%A4%BA%E6%84%8F%E5%9B%BE.png 1386w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<ol>\n<li>å¦‚æœå½“å‰è¿è¡Œçš„çº¿ç¨‹æ•°å°äºcorePoolSizeï¼Œåˆ™åˆ›å»ºæ–°çš„çº¿ç¨‹æ¥æ‰§è¡Œä»»åŠ¡ï¼ˆæ‰§è¡Œè¿™ä¸€æ­¥éª¤éœ€è¦è·å–å…¨å±€é”ï¼‰</li>\n<li>å¦‚æœè¿è¡Œçš„çº¿ç¨‹æ•°ç­‰äºæˆ–è€…å¤§äºcorePoolSizeï¼Œåˆ™å°†ä»»åŠ¡åŠ å…¥BlockingQueue</li>\n<li>å¦‚æœæ— æ³•å°†ä»»åŠ¡åŠ å…¥BlockingQueueï¼Œåˆ™åˆ›å»ºæ–°çš„çº¿ç¨‹æ¥å¤„ç†ä»»åŠ¡ï¼Œå¹¶è°ƒç”¨RejectedExceptionHandler.rejectedExecution()æ–¹æ³•</li>\n</ol>\n<p><strong>å·¥ä½œçº¿ç¨‹</strong>ï¼šçº¿ç¨‹æ± åˆ›å»ºçº¿ç¨‹æ—¶ï¼Œä¼šå°†çº¿ç¨‹å°è£…æˆå·¥ä½œçº¿ç¨‹Workerï¼ŒWorkeråœ¨æ‰§è¡Œå®Œä»»åŠ¡åï¼Œè¿˜ä¼šå¾ªç¯è·å–å·¥ä½œé˜Ÿåˆ—é‡Œçš„ä»»åŠ¡æ¥æ‰§è¡Œã€‚</p>\n<p>çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹æ‰§è¡Œä»»åŠ¡åˆ†ä¸¤ç§æƒ…å†µï¼š</p>\n<ol>\n<li>åœ¨execute() æ–¹æ³•ä¸­åˆ›å»ºä¸€ä¸ªçº¿ç¨‹æ—¶ï¼Œä¼šè®©è¿™ä¸ªçº¿ç¨‹æ‰§è¡Œå½“å‰ä»»åŠ¡ã€‚</li>\n<li>è¿™ä¸ªçº¿ç¨‹æ‰§è¡Œå®Œä¸Šä¸€ä»»åŠ¡åï¼Œä¼šåå¤ä»BlockingQueueä¸­è·å–ä»»åŠ¡æ¥æ‰§è¡Œã€‚</li>\n</ol>\n<h3>çº¿ç¨‹æ± çš„ä½¿ç”¨</h3>\n<p>é€šè¿‡ThreadPoolExecutoræ¥åˆ›å»ºä¸€ä¸ªçº¿ç¨‹æ± ã€‚</p>\n<p>åˆ›å»ºä¸€ä¸ªçº¿ç¨‹æ± éœ€è¦çš„å‡ ä¸ªå‚æ•°ï¼š</p>\n<ol>\n<li>corePoolSize æ ¸å¿ƒçº¿ç¨‹æ•°é‡</li>\n<li>maxPoolSize çº¿ç¨‹æ± æœ€å¤§æ•°é‡</li>\n<li>\n<p>runnableTaskQueue ä»»åŠ¡é˜Ÿåˆ—</p>\n<ol>\n<li>ArrayBlockingQueue åŸºäºæ•°ç»„ç»“æ„çš„æœ‰ç•Œé˜»å¡é˜Ÿåˆ—</li>\n<li>LinkedBlockingQueue åŸºäºé“¾è¡¨ç»“æ„çš„é˜»å¡é˜Ÿåˆ—</li>\n<li>SynchronousQueue  ä¸å­˜å‚¨å…ƒç´ çš„é˜»å¡é˜Ÿåˆ—</li>\n<li>PriorityBlockingQueue å…·æœ‰ä¼˜å…ˆçº§çš„æ— çº¿é˜»å¡é˜Ÿåˆ—</li>\n</ol>\n</li>\n<li>ThreadFactory åˆ›å»ºçº¿ç¨‹çš„å·¥å‚ï¼Œä½¿ç”¨guavaæä¾›çš„ThreadFactoryBuilderç»™çº¿ç¨‹è®¾ç½®æœ‰æ„ä¹‰çš„åå­—</li>\n<li>\n<p>RejectedExceptionHandler å½“é˜Ÿåˆ—å’Œçº¿ç¨‹æ± éƒ½æ»¡äº†ï¼Œçº¿ç¨‹æ± æ— æ³•æ‰§è¡Œæ–°ä»»åŠ¡æ—¶çš„å¤„ç†ç­–ç•¥</p>\n<ol>\n<li>AbortPolicy ç›´æ¥æŠ›å¼‚å¸¸</li>\n<li>CallerRunsPolicy ä½¿ç”¨è°ƒç”¨è€…æ‰€å±çš„çº¿ç¨‹æ¥è¿è¡Œ</li>\n<li>DiscardOldestPolicy æŠ›å¼ƒé˜Ÿåˆ—é‡Œçš„æœ€è¿‘ä¸€ä¸ªä»»åŠ¡ï¼Œæ‰§è¡Œå½“å‰ä»»åŠ¡</li>\n<li>DiscardPolicy ç›´æ¥æŠ›å¼ƒï¼Œä¸å¤„ç†</li>\n</ol>\n</li>\n<li>keepAliveTime çº¿ç¨‹æ´»åŠ¨ä¿æŒæ—¶é—´</li>\n<li>TimeUnit çº¿ç¨‹æ´»åŠ¨ä¿æŒæ—¶é—´çš„å•ä½</li>\n</ol>\n<p>åˆ›å»ºçº¿ç¨‹æ± ç¤ºä¾‹ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token class-name\">ExecutorService</span> <span class=\"token function\">getExecutorService</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token class-name\">ThreadFactory</span> threadFactory <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ThreadFactoryBuilder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">build</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token class-name\">ExecutorService</span> executorService <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ThreadPoolExecutor</span><span class=\"token punctuation\">(</span>\n      corePoolSize<span class=\"token punctuation\">,</span> maxPoolSize<span class=\"token punctuation\">,</span> <span class=\"token number\">20000L</span><span class=\"token punctuation\">,</span>\n      <span class=\"token class-name\">TimeUnit</span><span class=\"token punctuation\">.</span>MILLISECONDS<span class=\"token punctuation\">,</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">LinkedBlockingDeque</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token number\">2500</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      threadFactory<span class=\"token punctuation\">,</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ThreadPoolExecutor</span><span class=\"token punctuation\">.</span><span class=\"token class-name\">CallerRunsPolicy</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> executorService<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3>æäº¤ä»»åŠ¡åˆ°çº¿ç¨‹æ± </h3>\n<ul>\n<li>\n<p>execute() ç”¨äºæäº¤ä¸éœ€è¦è¿”å›å€¼çš„ä»»åŠ¡</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\">executorService<span class=\"token punctuation\">.</span><span class=\"token function\">execute</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-></span><span class=\"token punctuation\">{</span>\n<span class=\"token comment\">// do something</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n</li>\n<li>\n<p>submit() ç”¨äºæäº¤éœ€è¦è¿”å›å€¼çš„ä»»åŠ¡ï¼Œä»»åŠ¡éœ€è¦å®ç°Callable æ¥å£ï¼Œè¿”å›å€¼ä¸ºFutureï¼Œå¯ä»¥é€šè¿‡future.get()è·å–è¿”å›å€¼ï¼Œget()æ–¹æ³•ä¼šé˜»å¡å½“å‰çº¿ç¨‹ç›´åˆ°ä»»åŠ¡å®Œæˆ</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token class-name\">Future</span> future <span class=\"token operator\">=</span> executorService<span class=\"token punctuation\">.</span><span class=\"token function\">submit</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">CallableTask</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n<span class=\"token class-name\">Object</span> o <span class=\"token operator\">=</span> future<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">InterruptedException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\ne<span class=\"token punctuation\">.</span><span class=\"token function\">printStackTrace</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">ExecutionException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\ne<span class=\"token punctuation\">.</span><span class=\"token function\">printStackTrace</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n</ul>\n<h2>å‚è€ƒæ–‡çŒ®</h2>\n<ul>\n<li>ã€ŠJavaå¹¶å‘ç¼–ç¨‹çš„è‰ºæœ¯ã€‹</li>\n</ul>","frontmatter":{"title":"å¤šçº¿ç¨‹å¤ä¹ ç¬”è®°","date":"2018-04-07"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/multi-thread-notes/","previous":{"fields":{"slug":"/jenkins-ci/"},"frontmatter":{"title":"JenkinsæŒç»­é›†æˆ"}},"next":{"fields":{"slug":"/java-interview-questions/"},"frontmatter":{"title":"ä¸€äº›Javaç›¸å…³çš„é¢è¯•é¢˜æ•´ç†"}}}}