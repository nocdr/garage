{"data":{"site":{"siteMetadata":{"title":"ğŸ¤”ï¸ Jason Yang's Blog","author":"Jason Yang"}},"markdownRemark":{"id":"511eca75-410a-58d5-b40e-39b2f1dbc7f6","excerpt":"è£…é¥°å™¨æ¨¡å¼ï¼ˆDecorator Patternâ€¦","html":"<p>è£…é¥°å™¨æ¨¡å¼ï¼ˆDecorator Patternï¼‰å…è®¸å‘ä¸€ä¸ªç°æœ‰çš„å¯¹è±¡æ·»åŠ æ–°çš„åŠŸèƒ½ï¼ŒåŒæ—¶åˆä¸æ”¹å˜å…¶ç»“æ„ã€‚\nè¿™ç§ç±»å‹çš„è®¾è®¡æ¨¡å¼å±äº<code class=\"language-text\">ç»“æ„å‹æ¨¡å¼</code>ï¼Œå®ƒæ˜¯ä½œä¸ºç°æœ‰çš„ç±»çš„ä¸€ä¸ªåŒ…è£…ã€‚\nè¿™ç§æ¨¡å¼åˆ›å»ºäº†ä¸€ä¸ªè£…é¥°ç±»ï¼Œç”¨æ¥<code class=\"language-text\">åŒ…è£…</code>åŸæœ‰çš„ç±»ï¼Œå¹¶åœ¨ä¿æŒç±»æ–¹æ³•ç­¾åå®Œæ•´æ€§çš„å‰æä¸‹ï¼Œæä¾›äº†é¢å¤–çš„åŠŸèƒ½ã€‚\næˆ‘ä»¬é€šè¿‡ä¸‹é¢çš„å®ä¾‹æ¥æ¼”ç¤ºè£…é¥°å™¨æ¨¡å¼çš„ç”¨æ³•ã€‚å…¶ä¸­ï¼Œæˆ‘ä»¬å°†æŠŠä¸€ä¸ª<code class=\"language-text\">å½¢çŠ¶</code>è£…é¥°ä¸Šä¸åŒçš„é¢œè‰²ï¼ŒåŒæ—¶åˆä¸æ”¹å˜å½¢çŠ¶ç±»ã€‚</p>\n<h2>ä»‹ç»</h2>\n<p><strong>æ„å›¾ï¼š</strong>åŠ¨æ€åœ°ç»™ä¸€ä¸ªå¯¹è±¡æ·»åŠ ä¸€äº›é¢å¤–çš„èŒè´£ã€‚å°±å¢åŠ åŠŸèƒ½æ¥è¯´ï¼Œè£…é¥°å™¨æ¨¡å¼ç›¸æ¯”ç”Ÿæˆå­ç±»æ›´ä¸ºçµæ´»ã€‚</p>\n<p><strong>ä¸»è¦è§£å†³ï¼š</strong>ä¸€èˆ¬çš„ï¼Œæˆ‘ä»¬ä¸ºäº†æ‰©å±•ä¸€ä¸ªç±»ç»å¸¸ä½¿ç”¨ç»§æ‰¿æ–¹å¼å®ç°ï¼Œç”±äºç»§æ‰¿ä¸ºç±»å¼•å…¥é™æ€ç‰¹å¾ï¼Œå¹¶ä¸”éšç€æ‰©å±•åŠŸèƒ½çš„å¢å¤šï¼Œå­ç±»ä¼šå¾ˆè†¨èƒ€ã€‚</p>\n<p><strong>ä½•æ—¶ä½¿ç”¨ï¼š</strong>åœ¨ä¸æƒ³å¢åŠ å¾ˆå¤šå­ç±»çš„æƒ…å†µä¸‹æ‰©å±•ç±»ã€‚</p>\n<p><strong>å¦‚ä½•è§£å†³ï¼š</strong>å°†å…·ä½“åŠŸèƒ½èŒè´£åˆ’åˆ†ï¼ŒåŒæ—¶ç»§æ‰¿è£…é¥°è€…æ¨¡å¼ã€‚</p>\n<p><strong>å…³é”®ä»£ç ï¼š</strong>\n1ã€Component ç±»å……å½“æŠ½è±¡è§’è‰²ï¼Œä¸åº”è¯¥å…·ä½“å®ç°ã€‚\n2ã€ä¿®é¥°ç±»å¼•ç”¨å’Œç»§æ‰¿ Component ç±»ï¼Œå…·ä½“æ‰©å±•ç±»é‡å†™çˆ¶ç±»æ–¹æ³•ã€‚</p>\n<p><strong>åº”ç”¨å®ä¾‹ï¼š</strong>\n1ã€å­™æ‚Ÿç©ºæœ‰ 72 å˜ï¼Œå½“ä»–å˜æˆâ€åº™å®‡â€åï¼Œä»–çš„æ ¹æœ¬è¿˜æ˜¯ä¸€åªçŒ´å­ï¼Œä½†æ˜¯ä»–åˆæœ‰äº†åº™å®‡çš„åŠŸèƒ½ã€‚\n2ã€ä¸è®ºä¸€å¹…ç”»æœ‰æ²¡æœ‰ç”»æ¡†éƒ½å¯ä»¥æŒ‚åœ¨å¢™ä¸Šï¼Œä½†æ˜¯é€šå¸¸éƒ½æ˜¯æœ‰ç”»æ¡†çš„ï¼Œå¹¶ä¸”å®é™…ä¸Šæ˜¯ç”»æ¡†è¢«æŒ‚åœ¨å¢™ä¸Šã€‚åœ¨æŒ‚åœ¨å¢™ä¸Šä¹‹å‰ï¼Œç”»å¯ä»¥è¢«è’™ä¸Šç»ç’ƒï¼Œè£…åˆ°æ¡†å­é‡Œï¼›è¿™æ—¶ç”»ã€ç»ç’ƒå’Œç”»æ¡†å½¢æˆäº†ä¸€ä¸ªç‰©ä½“ã€‚</p>\n<p><strong>ä¼˜ç‚¹ï¼š</strong>è£…é¥°ç±»å’Œè¢«è£…é¥°ç±»å¯ä»¥ç‹¬ç«‹å‘å±•ï¼Œä¸ä¼šç›¸äº’è€¦åˆï¼Œè£…é¥°æ¨¡å¼æ˜¯ç»§æ‰¿çš„ä¸€ä¸ªæ›¿ä»£æ¨¡å¼ï¼Œè£…é¥°æ¨¡å¼å¯ä»¥åŠ¨æ€æ‰©å±•ä¸€ä¸ªå®ç°ç±»çš„åŠŸèƒ½ã€‚</p>\n<p><strong>ç¼ºç‚¹ï¼š</strong>å¤šå±‚è£…é¥°æ¯”è¾ƒå¤æ‚ã€‚</p>\n<p><strong>ä½¿ç”¨åœºæ™¯ï¼š</strong>\n1ã€æ‰©å±•ä¸€ä¸ªç±»çš„åŠŸèƒ½ã€‚\n2ã€åŠ¨æ€å¢åŠ åŠŸèƒ½ï¼ŒåŠ¨æ€æ’¤é”€ã€‚</p>\n<p><strong>æ³¨æ„äº‹é¡¹ï¼š</strong>å¯ä»£æ›¿ç»§æ‰¿ã€‚</p>\n<h2>å®ç°</h2>\n<p>æˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ª Shape æ¥å£å’Œå®ç°äº† Shape æ¥å£çš„å®ä½“ç±»ã€‚ç„¶åæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªå®ç°äº† Shape æ¥å£çš„æŠ½è±¡è£…é¥°ç±» ShapeDecoratorï¼Œå¹¶æŠŠ Shape å¯¹è±¡ä½œä¸ºå®ƒçš„å®ä¾‹å˜é‡ã€‚\nRedShapeDecorator æ˜¯å®ç°äº† ShapeDecorator çš„å®ä½“ç±»ã€‚\nDecoratorPatternDemoï¼Œæˆ‘ä»¬çš„æ¼”ç¤ºç±»ä½¿ç”¨ RedShapeDecorator æ¥è£…é¥° Shape å¯¹è±¡ã€‚</p>\n<h3>æ­¥éª¤ 1</h3>\n<p>åˆ›å»ºä¸€ä¸ªæ¥å£ã€‚</p>\n<p>Shape.java</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-java line-numbers\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">Shape</span> <span class=\"token punctuation\">{</span>\n   <span class=\"token keyword\">void</span> <span class=\"token function\">draw</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<h3>æ­¥éª¤ 2</h3>\n<p>åˆ›å»ºå®ç°æ¥å£çš„å®ä½“ç±»ã€‚</p>\n<p>Rectangle.java</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-java line-numbers\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Rectangle</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">Shape</span> <span class=\"token punctuation\">{</span>\n\n   <span class=\"token annotation punctuation\">@Override</span>\n   <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">draw</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Shape: Rectangle\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n   <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Circle.java</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-java line-numbers\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Circle</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">Shape</span> <span class=\"token punctuation\">{</span>\n\n   <span class=\"token annotation punctuation\">@Override</span>\n   <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">draw</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Shape: Circle\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n   <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3>æ­¥éª¤ 3</h3>\n<p>åˆ›å»ºå®ç°äº† Shape æ¥å£çš„æŠ½è±¡è£…é¥°ç±»ã€‚</p>\n<p>ShapeDecorator.java</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-java line-numbers\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">abstract</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ShapeDecorator</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">Shape</span> <span class=\"token punctuation\">{</span>\n   <span class=\"token keyword\">protected</span> <span class=\"token class-name\">Shape</span> decoratedShape<span class=\"token punctuation\">;</span>\n\n   <span class=\"token keyword\">public</span> <span class=\"token class-name\">ShapeDecorator</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Shape</span> decoratedShape<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>decoratedShape <span class=\"token operator\">=</span> decoratedShape<span class=\"token punctuation\">;</span>\n   <span class=\"token punctuation\">}</span>\n\n   <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">draw</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n      decoratedShape<span class=\"token punctuation\">.</span><span class=\"token function\">draw</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n   <span class=\"token punctuation\">}</span>    \n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3>æ­¥éª¤ 4</h3>\n<p>åˆ›å»ºæ‰©å±•äº† ShapeDecorator ç±»çš„å®ä½“è£…é¥°ç±»ã€‚</p>\n<p>RedShapeDecorator.java</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-java line-numbers\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">RedShapeDecorator</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">ShapeDecorator</span> <span class=\"token punctuation\">{</span>\n\n   <span class=\"token keyword\">public</span> <span class=\"token class-name\">RedShapeDecorator</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Shape</span> decoratedShape<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>decoratedShape<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>        \n   <span class=\"token punctuation\">}</span>\n\n   <span class=\"token annotation punctuation\">@Override</span>\n   <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">draw</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      decoratedShape<span class=\"token punctuation\">.</span><span class=\"token function\">draw</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>           \n      <span class=\"token function\">setRedBorder</span><span class=\"token punctuation\">(</span>decoratedShape<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n   <span class=\"token punctuation\">}</span>\n\n   <span class=\"token keyword\">private</span> <span class=\"token keyword\">void</span> <span class=\"token function\">setRedBorder</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Shape</span> decoratedShape<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n      <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Border Color: Red\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n   <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3>æ­¥éª¤ 5</h3>\n<p>ä½¿ç”¨ RedShapeDecorator æ¥è£…é¥° Shape å¯¹è±¡ã€‚</p>\n<p>DecoratorPatternDemo.java</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-java line-numbers\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">DecoratorPatternDemo</span> <span class=\"token punctuation\">{</span>\n   <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n      <span class=\"token class-name\">Shape</span> circle <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Circle</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n      <span class=\"token class-name\">Shape</span> redCircle <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">RedShapeDecorator</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Circle</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n      <span class=\"token class-name\">Shape</span> redRectangle <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">RedShapeDecorator</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Rectangle</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Circle with normal border\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      circle<span class=\"token punctuation\">.</span><span class=\"token function\">draw</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n      <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\\nCircle of red border\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      redCircle<span class=\"token punctuation\">.</span><span class=\"token function\">draw</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n      <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\\nRectangle of red border\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      redRectangle<span class=\"token punctuation\">.</span><span class=\"token function\">draw</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n   <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3>æ­¥éª¤ 6</h3>\n<p>éªŒè¯è¾“å‡ºã€‚</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">Circle with normal border\nShape: Circle\n\nCircle of red border\nShape: Circle\nBorder Color: Red\n\nRectangle of red border\nShape: Rectangle\nBorder Color: Red</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>","frontmatter":{"title":"è£…é¥°å™¨æ¨¡å¼","date":"2017-10-03"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/decorator-pattern/","previous":{"fields":{"slug":"/idea-for-mac-key-map/"},"frontmatter":{"title":"IntelliJ IDEA For Mac å¿«æ·é”®"}},"next":{"fields":{"slug":"/strategy-pattern/"},"frontmatter":{"title":"ç­–ç•¥æ¨¡å¼"}}}}