{"data":{"site":{"siteMetadata":{"title":"ğŸ¤”ï¸ Jason Yang's Blog","author":"nocoder"}},"markdownRemark":{"id":"01a293c9-f89e-5bf0-a297-2bf38b4192b5","excerpt":"æˆ‘ä»¬ä¸€èˆ¬éƒ½ä¼šæŠŠæ•°æ®åº“çš„è¿æ¥ä¿¡æ¯å†™åœ¨propertiesé…ç½®æ–‡ä»¶é‡Œï¼Œåªè¦æ‰“å¼€äº†é…ç½®æ–‡ä»¶ï¼Œå°±èƒ½ç›´æ¥çœ‹åˆ°æ•°æ®åº“çš„ç”¨æˆ·åå¯†ç ç­‰ä¿¡æ¯ï¼Œä¸€äº›é¡¹ç›®ä¼šè¦æ±‚ä¸èƒ½å‡ºç°æ˜æ–‡å¯†ç ï¼Œæ¥ä¸‹æ¥ï¼Œç®€å•ä¸‰æ­¥ï¼Œå®ç°é…ç½®æ–‡ä»¶é‡Œçš„ç”¨æˆ·åå’Œå¯†ç åŠ å¯†ã€‚ä¸€ã€åŠ å¯†è§£å¯†å·¥å…·ç±»æˆ‘ä»¥Base64ä¸ºä¾‹ï¼Œå†™ä¸ªç®€å•çš„åŠ å¯†å’Œè§£å¯†å·¥å…·äºŒã€é€šè¿‡ç»§æ‰¿springé…ç½®ç±»å¹¶é‡å†™å¤„ç†æ–¹æ³•å®ç°è§£å¯†ä¸‰ã€ä¿®æ”¹é…ç½®æ–‡ä»¶1ã€ä½¿ç”¨åŠ å¯†å·¥å…·ç±»å¯¹ç”¨æˆ·åå’Œå¯†ç è¿›è¡ŒåŠ å¯†ï¼Œä¿®æ”¹propertiesé…ç½®æ–‡ä»¶2ã€ä¿®æ”¹ï¼Œå¼•å…¥é…ç½®æ–‡ä»¶OKäº†ï¼Œå°±è¿™ä¸‰æ­¥ï¼Œé‡å¯æœåŠ¡è¯•è¯•çœ‹ï¼","html":"<blockquote>\n<p>æˆ‘ä»¬ä¸€èˆ¬éƒ½ä¼šæŠŠæ•°æ®åº“çš„è¿æ¥ä¿¡æ¯å†™åœ¨propertiesé…ç½®æ–‡ä»¶é‡Œï¼Œåªè¦æ‰“å¼€äº†é…ç½®æ–‡ä»¶ï¼Œå°±èƒ½ç›´æ¥çœ‹åˆ°æ•°æ®åº“çš„ç”¨æˆ·åå¯†ç ç­‰ä¿¡æ¯ï¼Œä¸€äº›é¡¹ç›®ä¼šè¦æ±‚ä¸èƒ½å‡ºç°æ˜æ–‡å¯†ç ï¼Œæ¥ä¸‹æ¥ï¼Œç®€å•ä¸‰æ­¥ï¼Œå®ç°é…ç½®æ–‡ä»¶é‡Œçš„ç”¨æˆ·åå’Œå¯†ç åŠ å¯†ã€‚</p>\n</blockquote>\n<h3>ä¸€ã€åŠ å¯†è§£å¯†å·¥å…·ç±»</h3>\n<p>æˆ‘ä»¥Base64ä¸ºä¾‹ï¼Œå†™ä¸ªç®€å•çš„åŠ å¯†å’Œè§£å¯†å·¥å…·</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">package</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>nocoder<span class=\"token punctuation\">.</span>utils</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>commons<span class=\"token punctuation\">.</span>codec<span class=\"token punctuation\">.</span>binary</span><span class=\"token punctuation\">.</span><span class=\"token class-name\">Base64</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>commons<span class=\"token punctuation\">.</span>lang3</span><span class=\"token punctuation\">.</span><span class=\"token class-name\">StringUtils</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/**\n * EncryptUtil\n * Created by jason on 2017/7/18.\n */</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">EncryptUtil</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token comment\">/**\n     * åŠ å¯†\n     * @param value\n     * @return encode string value\n     */</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token class-name\">String</span> <span class=\"token function\">encode</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">StringUtils</span><span class=\"token punctuation\">.</span><span class=\"token function\">isNotBlank</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n            <span class=\"token class-name\">Base64</span> base64 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Base64</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">(</span>base64<span class=\"token punctuation\">.</span><span class=\"token function\">encode</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">.</span><span class=\"token function\">getBytes</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">return</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">/**\n     * è§£å¯†\n     * @param value\n     * @return decode string value\n     */</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token class-name\">String</span> <span class=\"token function\">decode</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">StringUtils</span><span class=\"token punctuation\">.</span><span class=\"token function\">isNotBlank</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n            <span class=\"token class-name\">Base64</span> base64 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Base64</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">(</span>base64<span class=\"token punctuation\">.</span><span class=\"token function\">decode</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">.</span><span class=\"token function\">getBytes</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">return</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">EncryptUtil</span><span class=\"token punctuation\">.</span><span class=\"token function\">encode</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"test\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">EncryptUtil</span><span class=\"token punctuation\">.</span><span class=\"token function\">decode</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"dGVzdA==\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3>äºŒã€é€šè¿‡ç»§æ‰¿springé…ç½®ç±»å¹¶é‡å†™å¤„ç†æ–¹æ³•å®ç°è§£å¯†</h3>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">package</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>nocoder<span class=\"token punctuation\">.</span>security</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>commons<span class=\"token punctuation\">.</span>lang3</span><span class=\"token punctuation\">.</span><span class=\"token class-name\">StringUtils</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>nocoder<span class=\"token punctuation\">.</span>utils</span><span class=\"token punctuation\">.</span><span class=\"token class-name\">EncryptUtil</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>beans</span><span class=\"token punctuation\">.</span><span class=\"token class-name\">BeansException</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>beans<span class=\"token punctuation\">.</span>factory</span><span class=\"token punctuation\">.</span><span class=\"token class-name\">BeanInitializationException</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>beans<span class=\"token punctuation\">.</span>factory<span class=\"token punctuation\">.</span>config</span><span class=\"token punctuation\">.</span><span class=\"token class-name\">ConfigurableListableBeanFactory</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>beans<span class=\"token punctuation\">.</span>factory<span class=\"token punctuation\">.</span>config</span><span class=\"token punctuation\">.</span><span class=\"token class-name\">PropertyPlaceholderConfigurer</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util</span><span class=\"token punctuation\">.</span><span class=\"token class-name\">Properties</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/**\n * é€šè¿‡ç»§æ‰¿springé…ç½®ç±»å¹¶é‡å†™å¤„ç†æ–¹æ³•å®ç°å¯†æ–‡è§£å¯†\n * Created by jason on 2017/7/18.\n */</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">EncryptPropertyPlaceholderConfigurer</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">PropertyPlaceholderConfigurer</span><span class=\"token punctuation\">{</span>\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">protected</span> <span class=\"token keyword\">void</span> <span class=\"token function\">processProperties</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">ConfigurableListableBeanFactory</span> beanFactory<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Properties</span> props<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">BeansException</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token class-name\">String</span> username <span class=\"token operator\">=</span> props<span class=\"token punctuation\">.</span><span class=\"token function\">getProperty</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"username\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">StringUtils</span><span class=\"token punctuation\">.</span><span class=\"token function\">isNotBlank</span><span class=\"token punctuation\">(</span>username<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n                props<span class=\"token punctuation\">.</span><span class=\"token function\">setProperty</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"username\"</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">EncryptUtil</span><span class=\"token punctuation\">.</span><span class=\"token function\">decode</span><span class=\"token punctuation\">(</span>username<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n\n            <span class=\"token class-name\">String</span> password <span class=\"token operator\">=</span> props<span class=\"token punctuation\">.</span><span class=\"token function\">getProperty</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"password\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">StringUtils</span><span class=\"token punctuation\">.</span><span class=\"token function\">isNotBlank</span><span class=\"token punctuation\">(</span>password<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n                props<span class=\"token punctuation\">.</span><span class=\"token function\">setProperty</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"password\"</span><span class=\"token punctuation\">,</span><span class=\"token class-name\">EncryptUtil</span><span class=\"token punctuation\">.</span><span class=\"token function\">decode</span><span class=\"token punctuation\">(</span>password<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n            <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">processProperties</span><span class=\"token punctuation\">(</span>beanFactory<span class=\"token punctuation\">,</span> props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Exception</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            e<span class=\"token punctuation\">.</span><span class=\"token function\">printStackTrace</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">BeanInitializationException</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">.</span><span class=\"token function\">getMessage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3>ä¸‰ã€ä¿®æ”¹é…ç½®æ–‡ä»¶</h3>\n<p>1ã€ä½¿ç”¨åŠ å¯†å·¥å…·ç±»å¯¹ç”¨æˆ·åå’Œå¯†ç è¿›è¡ŒåŠ å¯†ï¼Œä¿®æ”¹propertiesé…ç½®æ–‡ä»¶<code class=\"language-text\">config.properties</code></p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\">driver<span class=\"token operator\">=</span>org<span class=\"token punctuation\">.</span>postgresql<span class=\"token punctuation\">.</span><span class=\"token class-name\">Driver</span>\nurl<span class=\"token operator\">=</span>jdbc<span class=\"token operator\">:</span>postgresql<span class=\"token operator\">:</span><span class=\"token operator\">/</span><span class=\"token operator\">/</span><span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span><span class=\"token operator\">:</span><span class=\"token number\">5432</span><span class=\"token operator\">/</span>freda_db\nusername<span class=\"token operator\">=</span>åŠ å¯†åçš„ç”¨æˆ·å\npassword<span class=\"token operator\">=</span>åŠ å¯†åçš„å¯†ç \n#å®šä¹‰åˆå§‹è¿æ¥æ•°\ninitialSize<span class=\"token operator\">=</span><span class=\"token number\">0</span>\n#å®šä¹‰æœ€å¤§è¿æ¥æ•°\nmaxActive<span class=\"token operator\">=</span><span class=\"token number\">50</span>\n#å®šä¹‰æœ€å¤§ç©ºé—²\nmaxIdle<span class=\"token operator\">=</span><span class=\"token number\">50</span>\n#å®šä¹‰æœ€å°ç©ºé—²\nminIdle<span class=\"token operator\">=</span><span class=\"token number\">1</span>\n#å®šä¹‰æœ€é•¿ç­‰å¾…æ—¶é—´\nmaxWait<span class=\"token operator\">=</span><span class=\"token number\">60000</span></code></pre></div>\n<p>2ã€ä¿®æ”¹<code class=\"language-text\">applicationContext.xml</code>ï¼Œå¼•å…¥é…ç½®æ–‡ä»¶</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token operator\">&lt;</span><span class=\"token operator\">!</span><span class=\"token operator\">--</span> å¼•å…¥é…ç½®æ–‡ä»¶ï¼Œè¿™é‡Œçš„<span class=\"token keyword\">class</span>å°±æ˜¯ä¹‹å‰å†™çš„é‚£ä¸ª<span class=\"token class-name\">Spring</span>é…ç½®ç±»çš„è·¯å¾„ <span class=\"token operator\">--</span><span class=\"token operator\">></span>\n\t<span class=\"token operator\">&lt;</span>bean id<span class=\"token operator\">=</span><span class=\"token string\">\"encryptPropertyConfigurer\"</span> <span class=\"token keyword\">class</span><span class=\"token operator\">=</span><span class=\"token string\">\"org.nocoder.security.EncryptPropertyPlaceholderConfigurer\"</span><span class=\"token operator\">></span>\n\t\t<span class=\"token operator\">&lt;</span>property name<span class=\"token operator\">=</span><span class=\"token string\">\"locations\"</span><span class=\"token operator\">></span>\n\t\t\t<span class=\"token generics\"><span class=\"token punctuation\">&lt;</span>list<span class=\"token punctuation\">></span></span>\n\t\t\t\t<span class=\"token generics\"><span class=\"token punctuation\">&lt;</span>value<span class=\"token punctuation\">></span></span>classpath<span class=\"token operator\">:</span>config<span class=\"token punctuation\">.</span>properties<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>value<span class=\"token operator\">></span>\n\t\t\t<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>list<span class=\"token operator\">></span>\n\t\t<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>property<span class=\"token operator\">></span>\n\t<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>bean<span class=\"token operator\">></span></code></pre></div>\n<p>OKäº†ï¼Œå°±è¿™ä¸‰æ­¥ï¼Œé‡å¯æœåŠ¡è¯•è¯•çœ‹ï¼</p>","frontmatter":{"title":"Spring æ•°æ®åº“å¯†ç åŠ å¯†","date":"2017-07-18"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/database-info-encode-and-decode/","previous":{"fields":{"slug":"/apache-commons-codec/"},"frontmatter":{"title":"Apache Commons Codec åŠ å¯†è§£å¯†"}},"next":{"fields":{"slug":"/idea-for-mac-key-map/"},"frontmatter":{"title":"IntelliJ IDEA For Mac å¿«æ·é”®"}}}}